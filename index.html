<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ReplyShastra</title>

<style>
body{
    margin:0;
    background:#0f172a;
    font-family:Arial, Helvetica, sans-serif;
    color:white;
}

header{
    background:#020617;
    padding:15px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
    border-bottom:1px solid #1f2937;
}

#chat{
    height:calc(100vh - 140px);
    overflow-y:auto;
    padding:15px;
}

.msg{
    padding:12px 14px;
    margin:10px 0;
    border-radius:14px;
    max-width:80%;
    line-height:1.4;
    white-space:pre-wrap;
}

.user{
    background:#2563eb;
    margin-left:auto;
}

.bot{
    background:#1f2937;
    margin-right:auto;
}

#inputArea{
    position:fixed;
    bottom:0;
    width:100%;
    display:flex;
    padding:10px;
    background:#020617;
    border-top:1px solid #1f2937;
}

input{
    flex:1;
    padding:12px;
    border-radius:10px;
    border:none;
    outline:none;
    font-size:15px;
}

button{
    margin-left:8px;
    padding:12px 16px;
    border:none;
    border-radius:10px;
    background:#22c55e;
    color:black;
    font-weight:bold;
    cursor:pointer;
}
</style>
</head>

<body>

<header>ReplyShastra AI</header>

<div id="chat"></div>

<div id="inputArea">
<input id="userInput" placeholder="Apni problem likh...">
<button onclick="send()">Send</button>
</div>

<script>
const chat = document.getElementById("chat");

function addMessage(text, sender){
    const div = document.createElement("div");
    div.className = "msg " + sender;
    div.textContent = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

async function send(){
    const input = document.getElementById("userInput");
    const message = input.value.trim();
    if(!message) return;

    addMessage(message,"user");
    input.value="";

    addMessage("Typing...","bot");

    try{
        const res = await fetch("https://replyshastraai-production.up.railway.app/chat",{
            method:"POST",
            headers:{
                "Content-Type":"application/json"
            },
            body:JSON.stringify({message})
        });

        const data = await res.json();

        chat.lastChild.remove();
        addMessage(data.reply,"bot");

    }catch(e){
        chat.lastChild.remove();
        addMessage("Server offline... thodi der baad try kar.","bot");
    }
}
</script>

</body>
</html>
